<div class="container">
	<div class="row">
		<div class="col-8 offset-2">
			<div class="salonName">
				<p><%= @salon.detail.name %></p>
		  </div>

		  <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">

  			<div class="carousel-inner">
					<div class="carousel-item active">
      			<img src="<%= @photos.first.photo_url%>" class="d-block w-100" alt="...">
    			</div>

					<% @photos.each do |photo| %>
					<div class="carousel-item">
      			<img src="<%=photo.photo_url%>" class="d-block w-100 image-fluid" alt="...">
    			</div>
    			<% end %>
   			</div>


  			<a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
  				<div id ="previousBtn">
  					<div class ="arrow">
    				<span class="carousel-control-prev-icon" aria-hidden="true"></span>
    				<span class="sr-only">Previous</span>
    			</div>
    			</div>
  			</a>



  			<a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
  				<div id ="nextBtn">
  					<div class ="arrow">
    				<span class="carousel-control-next-icon" aria-hidden="true"></span>
    				<span class="sr-only">Next</span>
    			</div>
    			</div>
  		</a>
		</div>
		</div>
	</div>
</div>

<div class="container menu">
	<div class="row">
		<div class="col-6 offset-3">


<%= link_to 'New Appt', new_appointment_path, :class => 'btn btn-link' %>

<div id="star-rating">
	<% if @ratings.blank? %>
		<p>No ratings yet</p>
	<% elsif %>
<!-- show aggregated star ratings -->
		Rating:
		<% @avrating.round.to_i.times do %>
 			<img src="/images/star.png" width="16px" height="16px">
		<% end %>
		<% (5-@avrating.round).to_i.times do %>
 			<img src="/images/empty-star.png" width="16px" height="16px">
		<% end %>
	<% end%>
<%= link_to 'Submit rating', new_rating_path, :class => 'btn btn-link' %>

			<ul class="nav nav-tabs nav-justified" id="myTab" role="tablist">
  			<li class="nav-item">
    			<a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Services</a>
  			</li>

  			<li class="nav-item">
    			<a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Appointment</a>
  			</li>
  			<li class="nav-item">
    			<a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab" aria-controls="contact" aria-selected="false">Contact</a>
  			</li>
			</ul>


		<div class="tab-content" id="myTabContent">
  		<div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
  			<table class="table table-hover">
  				<tbody>
  					<% @services.each do |service| %>
    				<tr>
    						<td> <p><%= service.name %></p></td>
      					<td> <p> SGD <%= service.price %> </p></td>
    				</tr>
    				<% end %>
    			</tbody>
				</table>
  		</div>

  		<div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
  			<p class="instructions">Fill in your details below to book an appointment</p>
  				<%= form_with scope: :appointment, url: create_appointment_path, local: true, class: 'newform' do |form| %>
      		<div class="form-group">
    				<%= form.text_field :name, :class => 'form-text text-muted apptForm', :placeholder =>  'Your Name', :required => true %>
 					</div>
 					<div class="form-group">
    				<%= form.text_field :phone, :class => 'form-text text-muted apptForm', :placeholder =>  'Contact number', :required => true %>
  				</div>
  				<div class="form-group">
    				<%= form.text_field :email, :class => 'form-text text-muted apptForm',  :placeholder =>  'Email', :required => true %>
  				</div>
  				<div class="form-group">
    				<%= form.date_select :date %>
  				</div>
  				<div class="form-group">
						<%= form.collection_select :timeslot_id, @timeslots, :id, :time %>
					</div>
					<div class="form-group">
						<%= form.collection_select :service_id, @services, :id, :name %>
					</div>
        		<%= form.submit 'Book Appointment', :class => 'btn btn-primary' %>
      	<% end %>
				</div>

				<div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
					<p class ="profileSalon"><%= @salon.detail.name %></p>
  				<p>Phone: <%= @salon.detail.phone %></p>
					<p>Address: <%= @salon.detail.address %></p>
					<p>Area: <%= @salon.detail.area %></p>
					<p>Website: <%= @salon.detail.website %></p>
				</div>
			</div>
		</div>
	</div>

</div>